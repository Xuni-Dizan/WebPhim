<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chính Sách Bảo Mật - Flick Tale</title> <!-- Updated -->
    <meta name="description" content="Tìm hiểu cách Flick Tale thu thập, sử dụng và bảo vệ thông tin cá nhân của bạn khi sử dụng dịch vụ xem phim của chúng tôi.">
    <meta name="keywords" content="chính sách bảo mật, flick tale, quyền riêng tư, bảo mật dữ liệu, thông tin cá nhân">

    <link rel="icon" href="../../favicon.ico" sizes="any">
    <link rel="icon" href="../../access/img/FlickTale.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" href="../../apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Montserrat:wght@500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="../../css/style.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'heading': ['Montserrat', 'sans-serif'],
                    },
                    // Copied from dieu_khoan_su_dung.html (Light Theme Palette)
                    colors: {
                        'primary': 'var(--primary-color)', 
                        'primary-hover': 'var(--primary-hover-color)',
                        'secondary': '#ffffff', 
                        'light-gray': '#f3f4f6', 
                        'medium-gray': '#e5e7eb', 
                        'dark-gray': '#1f2937',   
                        'text-color': '#111827',  
                        'text-muted': '#6b7280',  
                        'border-color': '#d1d5db',
                        'accent-blue': '#4f46e5', 
                        'accent-blue-darker': '#4338ca', 
                        'footer-bg': '#111827',      
                        'footer-text': '#9ca3af',    
                        'footer-link-hover': '#ffffff',
                        'white': '#ffffff',
                        'black': '#000000',
                    }
                }
            }
        }
    </script>

    <style>
        /* Styles matching dieu_khoan_su_dung.html (Light Theme V2) */
        html { scroll-behavior: smooth; }

        body {
            background-color: theme('colors.light-gray'); 
            color: theme('colors.text-color');
            font-family: var(--body-font);
        }

        /* Progress Bar */
        #progress-bar-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background-color: theme('colors.medium-gray');
            z-index: 100;
        }
        #progress-bar {
            height: 100%;
            background-color: theme('colors.accent-blue');
            width: 0%;
            transition: width 0.1s linear;
        }

        /* Header */
        header {
            background-color: theme('colors.white'); 
            box-shadow: 0 1px 3px rgba(0,0,0,0.07);
            position: sticky;
            top: 4px;
            z-index: 90;
            border-bottom: 1px solid theme('colors.medium-gray');
        }
        .header-logo { height: 32px; max-height: 40px; width: auto; object-fit: contain; vertical-align: middle; }
        @media (max-width: 640px) { .header-logo { height: 28px; } }
        header .header-logo-link { color: theme('colors.text-color'); }
        header a, header button { color: #4b5563; }
        header a:hover, header button:hover { color: theme('colors.accent-blue'); }

        /* Main Content Area */
        main { padding-top: 3rem; padding-bottom: 3rem; }
        .content-card {
            background-color: theme('colors.white');
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            border: 1px solid theme('colors.medium-gray');
        }
        .content-scroll-area {
            max-height: calc(100vh - 260px);
            overflow-y: auto;
            padding: 2rem;
        }
         .content-scroll-area::-webkit-scrollbar { width: 6px; }
         .content-scroll-area::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 3px; }
         .content-scroll-area::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
         .content-scroll-area::-webkit-scrollbar-thumb:hover { background: #94a3b8; }


        /* Sidebar */
        aside {
            background-color: theme('colors.white');
            border-radius: 1rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            height: fit-content;
            position: sticky;
            top: 80px;
            border: 1px solid theme('colors.medium-gray');
        }
        aside h3 { color: theme('colors.text-color'); font-weight: 600; font-family: var(--heading-font); }
        aside a {
            color: theme('colors.text-muted');
            transition: color 0.2s ease, padding-left 0.2s ease, border-color 0.2s ease;
            display: block;
            padding: 0.35rem 0.5rem;
            border-left: 3px solid transparent;
            border-radius: 0.25rem;
        }
        aside a:hover, aside a.active-toc { /* Added .active-toc for JS highlighting */
            color: theme('colors.accent-blue');
            padding-left: 0.75rem;
            border-left-color: theme('colors.accent-blue');
            background-color: #eff6ff; /* blue-50 background on hover */
        }

        /* Section Styling */
        section { margin-bottom: 2.5rem; scroll-margin-top: 90px; }
        section h2 {
            font-family: var(--heading-font);
            font-size: 1.25rem;
            font-weight: 600;
            color: theme('colors.dark-gray');
            margin-bottom: 0.75rem;
            border-bottom: 1px solid theme('colors.medium-gray');
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
        }
         section h2 i {
             margin-right: 0.6rem;
             color: theme('colors.accent-blue');
             font-size: 1.1em;
             width: 20px;
             text-align: center;
         }
        section p, section ul {
            font-size: 1rem;
            line-height: 1.75;
            color: #374151;
        }
        section ul { list-style: disc; padding-left: 1.5rem; margin-top: 0.5rem; }
        section li { margin-bottom: 0.25rem; }
        section a { color: theme('colors.accent-blue'); text-decoration: underline; font-weight: 500; }
        section a:hover { color: theme('colors.accent-blue-darker'); }

        /* Button */
        .action-button {
            background-color: theme('colors.accent-blue');
            color: theme('colors.white');
            transition: background-color 0.2s ease, transform 0.1s ease;
            font-weight: 600;
            padding: 0.6rem 1.5rem;
            border-radius: 0.5rem;
        }
        .action-button:hover {
            background-color: theme('colors.accent-blue-darker');
            transform: translateY(-1px);
        }
        .action-button:disabled { background-color: #9ca3af; cursor: not-allowed; transform: none; }


        /* Thank You Message */
        #thank-you-message {
            position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.6);
            display: flex; align-items: center; justify-content: center;
            z-index: 110; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        #thank-you-message.visible { opacity: 1; visibility: visible; }
        #thank-you-message > div {
            background-color: white; padding: 2rem; border-radius: 1rem; text-align: center;
            max-width: 24rem; margin: 1rem; transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        #thank-you-message.visible > div { transform: scale(1); }
        #thank-you-message h2 { color: theme('colors.dark-gray'); font-family: var(--heading-font); }
        #thank-you-message p { color: theme('colors.text-muted'); }

        /* Scroll-to-top button */
        #scroll-to-top {
            background-color: theme('colors.white');
            color: theme('colors.accent-blue');
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s ease, color 0.2s ease, opacity 0.3s ease, transform 0.3s ease, visibility 0.3s ease;
            opacity: 0; visibility: hidden; transform: translateY(10px);
            width: 48px; height: 48px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; border: 1px solid theme('colors.medium-gray');
        }
        #scroll-to-top.visible { opacity: 1; visibility: visible; transform: translateY(0); }
        #scroll-to-top:hover { background-color: theme('colors.accent-blue'); color: theme('colors.white'); }

        /* Footer */
        footer {
            background-color: theme('colors.footer-bg'); 
            color: theme('colors.footer-text'); 
            border-top: 1px solid #374151; 
        }
        footer a { color: theme('colors.footer-text'); }
        footer a:hover { color: theme('colors.footer-link-hover'); }
        footer h3 { color: theme('colors.footer-link-hover'); font-family: var(--heading-font); }

    </style>
</head>
<body class="min-h-screen flex flex-col">

    <div id="progress-bar-container">
        <div id="progress-bar"></div>
    </div>

    <header class="py-3 px-4 sm:px-6 md:px-10">
        <div class="container mx-auto flex justify-between items-center max-w-screen-xl">
            <a href="../../index.html" class="header-logo-link" aria-label="Về trang chủ Flick Tale">
                <img src="../../access/img/FlickTale.jpg" alt="Logo Flick Tale" class="header-logo"> </a>
            <div>
                <a href="../../index.html" class="hover:text-accent-blue transition duration-300 mr-2 sm:mr-4 inline-flex items-center p-2 rounded" aria-label="Quay lại trang chủ">
                    <i class="fas fa-arrow-left mr-0 sm:mr-1" aria-hidden="true"></i>
                    <span class="hidden sm:inline">Trang Chủ</span>
                </a>
                 <button class="hover:text-accent-blue transition duration-300 p-2 rounded-full" aria-label="Tài khoản người dùng">
                    <i class="fas fa-user text-lg sm:text-xl" aria-hidden="true"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 flex-grow">
        <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-4 gap-8 mt-10">
            <aside class="hidden lg:block">
                <h3 class="text-lg font-semibold mb-4">Mục lục</h3>
                <nav id="toc-nav-privacy" class="space-y-1">
                    <p class="text-sm text-gray-500">Đang tải mục lục...</p>
                </nav>
            </aside>

            <div class="lg:col-span-3 flex flex-col">
                <h1 class="text-3xl font-bold mb-8 text-dark-gray font-heading">Chính Sách Bảo Mật Flick Tale</h1>
                <div class="content-card flex-grow flex flex-col">
                    <div id="policy-content-area" class="content-scroll-area flex-grow">
                        <p id="loading-policy" class="text-center text-text-muted py-10">Đang tải chính sách...</p>
                        <!-- Policy sections will be populated by JS -->
                        </div>
                </div>

                <div class="mt-8 flex justify-end">
                    <button id="ack-button" class="action-button font-semibold py-2.5 px-8 text-base rounded-md">
                        Tôi đã đọc và hiểu rõ
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer class="py-12 px-4 sm:px-6 lg:px-8 mt-16" role="contentinfo">
        <div class="container mx-auto max-w-screen-xl grid grid-cols-1 md:grid-cols-3 gap-8">
             <div class="space-y-4">
                <a href="../../index.html" class="header-logo-link inline-block mb-2" aria-label="Trang chủ Flick Tale">
                     <img src="../../access/img/FlickTale.jpg" alt="Logo Flick Tale" class="h-10 hover:opacity-80 transition-opacity duration-300">
                </a>
                <p class="text-sm pr-4">
                    Khám phá thế giới điện ảnh với hàng ngàn phim lẻ và phim bộ hấp dẫn. Cập nhật liên tục, chất lượng cao.
                </p>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Liên Kết Nhanh</h3>
                <nav class="space-y-2" aria-label="Liên kết phụ">
                    <a href="../../about.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Về Chúng Tôi</a>
                    <a href="dieu_khoan_su_dung.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Điều Khoản Sử Dụng</a>
                    <a href="chinh_sach_bao_mat.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Chính Sách Bảo Mật</a>
                    <a href="lien_he_ho_tro.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Liên Hệ Hỗ Trợ</a>
                    <a href="../hoat_hinh_2D_3D.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Phim 2D/3D</a>
                    <a href="../anime.html" class="block hover:text-footer-link-hover hover:underline transition duration-300 text-sm">Anime</a>
                </nav>
            </div>
            <div>
                <h3 class="text-lg font-semibold mb-4">Theo Dõi Chúng Tôi</h3>
                <div class="flex space-x-4 mb-4" aria-label="Liên kết mạng xã hội">
                    <a href="#" class="hover:text-footer-link-hover transition duration-300 text-xl" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="hover:text-footer-link-hover transition duration-300 text-xl" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="hover:text-footer-link-hover transition duration-300 text-xl" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="hover:text-footer-link-hover transition duration-300 text-xl" aria-label="Youtube"><i class="fab fa-youtube"></i></a>
                </div>
                 <h3 class="text-lg font-semibold mb-2 mt-6">Thông Tin Liên Hệ</h3>
                 <p class="text-sm">Email: support@flicktale.com</p>
                 <p class="text-sm">Hotline: 1900-1234</p>
            </div>
        </div>
        <div class="mt-10 pt-8 border-t border-gray-700 text-center">
            <p class="text-sm">© <span id="footer-year">2025</span> Flick Tale. Mọi quyền được bảo lưu.</p>
            <p class="text-xs mt-2 opacity-70">
                Tuyên bố miễn trừ trách nhiệm: Trang web này chỉ dành cho mục đích trình diễn và học tập.
            </p>
        </div>
    </footer>

    <button id="scroll-to-top" class="hidden fixed bottom-6 right-6 p-3 rounded-full z-50" aria-label="Cuộn lên đầu trang">
        <i class="fas fa-arrow-up text-lg"></i>
    </button>

    <div id="thank-you-message">
        <div>
            <h2 class="text-2xl font-bold mb-4">Cảm ơn bạn!</h2>
            <p class="text-base mb-6">Bạn đã đọc Chính Sách Bảo Mật của chúng tôi.</p>
            <p class="text-sm text-gray-500">Đang chuyển hướng về trang chủ...</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Updated sectionsData for Privacy Policy
            const sectionsData = [
                 { id: 'collection', title: '1. Thu Thập Thông Tin', icon: 'fa-user-check', content: '<p>Chúng tôi thu thập thông tin bạn cung cấp trực tiếp (tên, email khi đăng ký), thông tin tự động (địa chỉ IP, loại thiết bị, lịch sử xem), và thông tin từ cookie để cải thiện trải nghiệm.</p><ul class="list-disc list-inside space-y-1 mt-2"><li><strong>Thông tin cá nhân:</strong> Tên, email, thông tin thanh toán (nếu có).</li><li><strong>Dữ liệu sử dụng:</strong> Lịch sử xem, sở thích, đánh giá, tìm kiếm.</li><li><strong>Thông tin kỹ thuật:</strong> Địa chỉ IP, loại trình duyệt, hệ điều hành, thông tin thiết bị.</li></ul>' },
                 { id: 'usage', title: '2. Mục Đích Sử Dụng', icon: 'fa-tasks', content: '<p>Thông tin của bạn được sử dụng để:</p><ul class="list-disc list-inside space-y-1 mt-2"><li>Cung cấp và cá nhân hóa dịch vụ (gợi ý phim, thông báo).</li><li>Xử lý thanh toán và quản lý tài khoản.</li><li>Phân tích và cải thiện chất lượng dịch vụ, giao diện người dùng.</li><li>Ngăn chặn gian lận và đảm bảo an ninh.</li><li>Tuân thủ các yêu cầu pháp lý.</li></ul>' },
                 { id: 'cookies', title: '3. Cookies & Công Nghệ Theo Dõi', icon: 'fa-cookie-bite', content: '<p>Chúng tôi sử dụng cookies và các công nghệ tương tự (pixel tags, web beacons) để thu thập thông tin về cách bạn tương tác với Dịch vụ, lưu trữ tùy chọn của bạn, và hiển thị quảng cáo phù hợp (nếu có). Bạn có thể quản lý cookies thông qua cài đặt trình duyệt của mình, tuy nhiên việc từ chối cookies có thể ảnh hưởng đến một số tính năng.</p>' },
                 { id: 'security', title: '4. Bảo Mật Dữ Liệu', icon: 'fa-shield-alt', content: '<p>Chúng tôi cam kết bảo vệ thông tin cá nhân của bạn bằng các biện pháp kỹ thuật và tổ chức phù hợp, bao gồm mã hóa dữ liệu (SSL/TLS), kiểm soát truy cập, tường lửa, và các quy trình bảo mật nội bộ. Tuy nhiên, không có phương thức truyền tải qua Internet hoặc lưu trữ điện tử nào là an toàn 100%.</p>' },
                 { id: 'thirdparty', title: '5. Chia Sẻ Với Bên Thứ Ba', icon: 'fa-users-cog', content: '<p>Chúng tôi có thể chia sẻ thông tin của bạn với các đối tác cung cấp dịch vụ (thanh toán, phân tích dữ liệu, marketing) trong phạm vi cần thiết để họ thực hiện dịch vụ cho chúng tôi. Chúng tôi yêu cầu các đối tác này tuân thủ các tiêu chuẩn bảo mật tương đương. Chúng tôi không bán thông tin cá nhân của bạn cho bên thứ ba. Thông tin có thể được tiết lộ nếu pháp luật yêu cầu hoặc để bảo vệ quyền lợi hợp pháp của chúng tôi.</p>' },
                 { id: 'retention', title: '6. Lưu Trữ Dữ Liệu', icon: 'fa-hourglass-half', content: '<p>Chúng tôi lưu trữ thông tin cá nhân của bạn trong khoảng thời gian cần thiết để hoàn thành các mục đích được nêu trong chính sách này, hoặc theo yêu cầu của pháp luật. Sau đó, thông tin sẽ được xóa hoặc ẩn danh một cách an toàn.</p>' },
                 { id: 'userRights', title: '7. Quyền Của Bạn', icon: 'fa-user-edit', content: '<p>Bạn có quyền truy cập, sửa đổi, xóa thông tin cá nhân của mình, hoặc yêu cầu hạn chế xử lý dữ liệu. Bạn cũng có quyền phản đối việc xử lý dữ liệu cho mục đích marketing trực tiếp. Vui lòng liên hệ chúng tôi qua thông tin bên dưới để thực hiện các quyền này.</p>' },
                 { id: 'childrenPrivacy', title: '8. Quyền Riêng Tư Của Trẻ Em', icon: 'fa-child', content: '<p>Dịch vụ của chúng tôi không dành cho trẻ em dưới 13 tuổi (hoặc độ tuổi tối thiểu theo quy định của pháp luật địa phương). Chúng tôi không cố ý thu thập thông tin cá nhân từ trẻ em. Nếu bạn tin rằng chúng tôi đã vô tình thu thập thông tin từ trẻ em, vui lòng liên hệ để chúng tôi xóa thông tin đó.</p>' },
                 { id: 'changes', title: '9. Cập Nhật Chính Sách', icon: 'fa-sync-alt', content: '<p>Chính sách này có thể được cập nhật theo thời gian. Mọi thay đổi sẽ được thông báo trên trang web này hoặc qua email. Việc bạn tiếp tục sử dụng Dịch vụ sau khi có thay đổi đồng nghĩa với việc bạn chấp nhận chính sách mới.</p>' },
                 { id: 'contact', title: '10. Liên Hệ Chúng Tôi', icon: 'fa-headset', content: '<p>Nếu bạn có bất kỳ câu hỏi hoặc quan ngại nào về Chính Sách Bảo Mật này, vui lòng liên hệ với chúng tôi qua email: <a href="mailto:privacy@flicktale.com" class="text-accent-blue underline hover:text-accent-blue-darker font-medium">privacy@flicktale.com</a> hoặc các kênh hỗ trợ khác được cung cấp trên trang web.</p>' }
            ];

            const policyContentArea = document.getElementById('policy-content-area');
            const tocNav = document.getElementById('toc-nav-privacy'); // Ensure this ID matches
            const loadingPolicy = document.getElementById('loading-policy');
            const progressBar = document.getElementById('progress-bar');
            const ackButton = document.getElementById('ack-button');
            const thankYouMessage = document.getElementById('thank-you-message');
            const scrollToTopBtn = document.getElementById('scroll-to-top');
            const footerYear = document.getElementById('footer-year');

            if (footerYear) footerYear.textContent = new Date().getFullYear();

            let policyHTML = ''; let tocHTML = '';
            if (policyContentArea && tocNav && loadingPolicy) {
                sectionsData.forEach(sec => {
                    const updatedContent = sec.content.replace(/class="text-accent-blue/g, 'class="text-accent-blue font-medium');
                    policyHTML += `<section id="${sec.id}"><h2 class="flex items-center"><i class="fas ${sec.icon} mr-2.5 text-accent-blue text-base"></i>${sec.title.substring(sec.title.indexOf('.') + 2)}</h2><div>${updatedContent}</div></section>`;
                    tocHTML += `<a href="#${sec.id}" class="block text-sm hover:text-accent-blue">${sec.title.substring(sec.title.indexOf('.') + 2)}</a>`;
                });
                policyContentArea.innerHTML = policyHTML; tocNav.innerHTML = tocHTML;
                loadingPolicy.style.display = 'none';
            } else { if(loadingPolicy) loadingPolicy.textContent = "Lỗi tải nội dung."; }

            const contentScrollArea = document.querySelector('.content-scroll-area');
            const updateProgressBar = () => {
                if (!contentScrollArea || !progressBar) return;
                const { scrollTop, scrollHeight, clientHeight } = contentScrollArea;
                const scrollableHeight = scrollHeight - clientHeight;
                const progress = scrollableHeight > 0 ? (scrollTop / scrollableHeight) * 100 : 0;
                progressBar.style.width = `${Math.min(progress, 100)}%`;
            };

             if (contentScrollArea) {
                 contentScrollArea.addEventListener('scroll', updateProgressBar);
                 updateProgressBar(); 
             } else {
                 const updateProgressBarWindow = () => {
                     if (!progressBar) return;
                     const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;
                     const progress = scrollHeight > 0 ? (window.scrollY / scrollHeight) * 100 : 0;
                     progressBar.style.width = `${Math.min(progress, 100)}%`;
                 };
                 window.addEventListener('scroll', updateProgressBarWindow);
                 updateProgressBarWindow();
             }

            const handleAcknowledge = () => {
                 if (thankYouMessage) {
                    thankYouMessage.classList.add('visible');
                    if (ackButton) ackButton.disabled = true;
                    setTimeout(() => { window.location.href = '../../index.html'; }, 3000);
                }
            };
            if (ackButton) ackButton.addEventListener('click', handleAcknowledge);

            const handleScroll = () => {
                if (!scrollToTopBtn) return;
                const isVisible = window.scrollY > 200;
                scrollToTopBtn.classList.toggle('visible', isVisible);
                scrollToTopBtn.classList.toggle('hidden', !isVisible);

                let currentSectionId = '';
                sectionsData.forEach(secData => {
                    const sectionEl = document.getElementById(secData.id);
                    if (sectionEl) {
                        const rect = sectionEl.getBoundingClientRect();
                        if (rect.top <= 100 && rect.bottom >= 100) {
                            currentSectionId = secData.id;
                        }
                    }
                });
                tocNav.querySelectorAll('a').forEach(link => {
                    link.classList.remove('active-toc');
                    if (link.getAttribute('href') === `#${currentSectionId}`) {
                        link.classList.add('active-toc');
                    }
                });
            };
            const scrollToTopFunc = () => window.scrollTo({ top: 0, behavior: 'smooth' });
            window.addEventListener('scroll', handleScroll);
            if (scrollToTopBtn) scrollToTopBtn.addEventListener('click', scrollToTopFunc);
            handleScroll();
        });
    </script>

</body>
</html>